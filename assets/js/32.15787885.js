(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{773:function(s,a,t){"use strict";t.r(a);var n=t(51),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[s._v("Jenkins çš„å®‰è£…ä¸æ˜¯ä¸€ä¸ªå¾ˆéš¾å¾—äº‹æƒ…ï¼Œå®˜ç½‘ä¹Ÿæœ‰"),t("a",{attrs:{href:"https://jenkins.io/zh/doc/book/installing/",target:"_blank",rel:"noopener noreferrer"}},[s._v("å®‰è£…æ–‡æ¡£"),t("OutboundLink")],1),s._v("ã€‚")]),s._v(" "),t("p",[s._v("but, æœ‰ç‚¹å°é—®é¢˜ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("Dockerçš„æ–¹å¼ï¼Œä¸æ˜¯å¾ˆç†Ÿçš„è¯åç»­ç»´æŠ¤æˆé—®é¢˜ã€‚")]),s._v(" "),t("li",[s._v("linuxä¸‹è½½æ•´ä¸ª JenkinsåŒ…å¤ªæ…¢äº†ï¼Œè€Œä¸”å¾ˆå¤šæ—¶å€™å¹¶æ²¡ç”¨å¤–ç½‘ç¯å¢ƒ")]),s._v(" "),t("li",[s._v("windowsä¸‹å®‰è£…æ˜¯æœ€ç®€å•çš„ï¼Œæ²¡æ¯›ç—…ï¼Œä½†ä¹Ÿç”¨çš„å¾ˆå°‘ğŸ˜‚")])]),s._v(" "),t("p",[s._v("æœ¬æ–‡è®°å½•ä¸‹ linuxä¸‹æ‰‹åŠ¨å®‰è£…çš„æ–¹å¼ï¼Œæ€»çš„æ¥è¯´å…¶å®å°±ä¸¤æ­¥ï¼š")]),s._v(" "),t("ol",[t("li",[s._v("å®‰è£… Java")]),s._v(" "),t("li",[s._v("ä¸‹è½½ Jenkinsï¼Œä½¿ç”¨ Javaå¯åŠ¨ Jenkins")])]),s._v(" "),t("h2",{attrs:{id:"æœ€ç®€å•çš„å®‰è£…æ–¹å¼"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æœ€ç®€å•çš„å®‰è£…æ–¹å¼"}},[s._v("->")]),s._v(" æœ€ç®€å•çš„å®‰è£…æ–¹å¼")]),s._v(" "),t("ul",[t("li",[s._v("å°†"),t("a",{attrs:{href:"http://mirrors.jenkins.io/war-stable/latest/jenkins.war",target:"_blank",rel:"noopener noreferrer"}},[s._v("æœ€æ–°çš„ç¨³å®šJenkins WARåŒ…"),t("OutboundLink")],1),s._v(" ä¸‹è½½åˆ°æ‚¨è®¡ç®—æœºä¸Šçš„ç›¸åº”ç›®å½•ã€‚\n"),t("ul",[t("li",[s._v("å…¶ä»–ä¸‹è½½åœ°å€è§ "),t("a",{attrs:{href:"https://jenkins.io/zh/download/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://jenkins.io/zh/download/"),t("OutboundLink")],1)])])]),s._v(" "),t("li",[s._v("åœ¨ä¸‹è½½çš„ç›®å½•å†…æ‰“å¼€ä¸€ä¸ªç»ˆç«¯/å‘½ä»¤æç¤ºç¬¦çª—å£åˆ°ã€‚")]),s._v(" "),t("li",[s._v("è¿è¡Œå‘½ä»¤ "),t("code",[s._v("java -jar jenkins.war")])]),s._v(" "),t("li",[s._v("æµè§ˆhttp://localhost:8080å¹¶ç­‰åˆ°"),t("em",[s._v("Unlock Jenkins")]),s._v("é¡µé¢å‡ºç°ã€‚")]),s._v(" "),t("li",[s._v("åç»­å‡çº§æ›´æ–° waråŒ…ç‰ˆæœ¬å³å¯\n"),t("strong",[s._v("è¯¥æ–¹å¼é»˜è®¤ Javaå·²å®‰è£…å®Œæˆ")]),s._v("ã€‚ä¸‹è½½é€Ÿåº¦ç¨å¾®èƒ½è®©äººæ¥å—ã€‚")])]),s._v(" "),t("h2",{attrs:{id:"å®‰è£…ä¸ºæœåŠ¡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å®‰è£…ä¸ºæœåŠ¡"}},[s._v("->")]),s._v(" å®‰è£…ä¸ºæœåŠ¡")]),s._v(" "),t("p",[s._v("ç›´æ¥ä»¥ä¸Šæ–‡çš„æ–¹å¼å®‰è£…æ²¡æœ‰é—®é¢˜ï¼Œä½†åœæ­¢å’Œé‡å¯ä¸å¤Ÿä¼˜é›…ï¼Œæ¯”è¾ƒæ¨èçš„æ–¹å¼æ˜¯å®‰è£…ä¸ºjenkins æœåŠ¡ï¼Œå¹¶è®¾ç½®å¼€æœºå¯åŠ¨ã€‚")]),s._v(" "),t("p",[s._v("å¦‚æœæ˜¯ä½¿ç”¨çš„ "),t("code",[s._v("init.d")]),s._v(" (centos 6)ï¼Œæœ€ç»ˆæœŸæœ›çš„ä½¿ç”¨æ–¹å¼æ˜¯è¿™æ ·çš„ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("å¯åŠ¨ï¼š"),t("code",[s._v("service jenkins start")])]),s._v(" "),t("li",[s._v("æŸ¥çœ‹çŠ¶æ€ï¼š"),t("code",[s._v("service jenkins status")])]),s._v(" "),t("li",[s._v("é‡å¯ï¼š "),t("code",[s._v("service jenkins restart")])]),s._v(" "),t("li",[s._v("åœæ­¢ï¼š "),t("code",[s._v("service jenkins stop")])]),s._v(" "),t("li",[s._v("è®¾ç½®å¼€æœºå¯åŠ¨ï¼š "),t("code",[s._v("chkconfig --add jenkins")])]),s._v(" "),t("li",[s._v("å–æ¶ˆå¼€æœºå¯åŠ¨ï¼š "),t("code",[s._v("chkconfig --del jenkins")])])]),s._v(" "),t("p",[s._v("å¦‚æœæ˜¯ä½¿ç”¨çš„ "),t("code",[s._v("systemd")]),s._v(" (centos 7)ï¼Œä½¿ç”¨æ–¹å¼åˆ™æ˜¯ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("å¯åŠ¨ï¼š"),t("code",[s._v("systemctl start jenkins")])]),s._v(" "),t("li",[s._v("æŸ¥çœ‹çŠ¶æ€ï¼š"),t("code",[s._v("systemctl status jenkins")])]),s._v(" "),t("li",[s._v("é‡å¯ï¼š "),t("code",[s._v("systemctl restart jenkins")])]),s._v(" "),t("li",[s._v("åœæ­¢ï¼š "),t("code",[s._v("systemctl stop jenkins")])]),s._v(" "),t("li",[s._v("è®¾ç½®å¼€æœºå¯åŠ¨ï¼š"),t("code",[s._v("systemctl enable jenkins")])]),s._v(" "),t("li",[s._v("å–æ¶ˆå¼€æœºå¯åŠ¨ï¼š"),t("code",[s._v("systemctl disable jenkins")])])]),s._v(" "),t("p",[s._v("å…·ä½“å®ç°å¦‚ä¸‹ï¼š")]),s._v(" "),t("h3",{attrs:{id:"ä»¥å®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä»¥å®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼"}},[s._v("->")]),s._v(" ä»¥å®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼")]),s._v(" "),t("ol",[t("li",[s._v("æ–°å»ºä¸€ä¸ª jenkinsç”¨æˆ·ï¼Œä½¿ç”¨è¯¥ç”¨æˆ·æ¥å¯åŠ¨æœåŠ¡"),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" jenkins\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("æç¤º")]),s._v(" "),t("p",[s._v("è¯¥æ­¥éª¤éå¿…é¡»ï¼Œæœ‰äººå–œæ¬¢ç”¨ rootæˆ–ä¸ªäººè´¦æˆ·ä¹Ÿå¯ä»¥ï¼Œåªæ˜¯æ¨è")])])]),s._v(" "),t("li",[s._v("ç¼–å†™ Jenkin é…ç½®æ–‡ä»¶\n"),t("ul",[t("li",[s._v("é…ç½®æ–‡ä»¶è·¯å¾„å®šä¸º "),t("code",[s._v("/etc/sysconfig/jenkins")])])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Jenkins system configuration")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("JENKINS_HOME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/home/jenkins\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("JENKINS_USER")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("jenkins\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("JENKINS_LOG")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/home/jenkins/jenkins.log\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("JENKINS_JAVA")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/bin/java\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("JENKINS_JAVAOPTS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-Dorg.apache.commons.jelly.tags.fmt.timeZone=Asia/Shanghai \\\n    -Duser.timezone=Asia/Shanghai -Dfile.encoding=UTF-8 -Djava.awt.headless=true"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("JENKINS_IP")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("JENKINS_PORT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("JENKINS_ARGS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("ul",[t("li",[s._v("ç»™è¯¥æ–‡ä»¶æ·»åŠ å¯æ‰§è¡Œæƒé™ "),t("code",[s._v("sudo chmod +x /etc/sysconfig/jenkins")])]),s._v(" "),t("li",[s._v("è®¾ç½® "),t("code",[s._v("/home/jenkins")]),s._v("ä¸º jenkinså·¥ä½œç›®å½•ï¼Œ å¹¶è®¾ç½®ä¸ºå…¨å±€ç¯å¢ƒå˜é‡ "),t("code",[s._v("JENKINS_HOME")]),s._v(" "),t("ul",[t("li",[s._v("ç¼–è¾‘æ–‡ä»¶ "),t("code",[s._v("/etc/profile")]),s._v(", è¿½åŠ ä»¥ä¸‹å†…å®¹"),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("JENKINS_HOME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/home/jenkins\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("code",[s._v("source /etc/profile")]),s._v(" ä½¿ç¯å¢ƒå˜é‡ç”Ÿæ•ˆ")])])]),s._v(" "),t("li",[s._v("å°†ä¸‹è½½çš„ "),t("code",[s._v("jenkins.war")]),s._v(" èµ„æºæ–‡ä»¶æ”¾åœ¨ jenkinså·¥ä½œç›®å½•")])]),s._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("æ³¨æ„")]),s._v(" "),t("p",[s._v("ç¡®ä¿ JENKINS_USER å¯¹ JENKINS_HOME æœ‰è¯»å†™æƒé™")])])]),s._v(" "),t("li",[s._v("åœ¨ jenkinså·¥ä½œç›®å½•ç¼–å†™å¯åŠ¨è„šæœ¬ "),t("code",[s._v("start-jenkins.sh")]),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# import sysconfig settings and set defaults")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" -f /etc/sysconfig/jenkins "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" /etc/sysconfig/jenkins\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("JENKINS_WAR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${JENKINS_HOME}")]),s._v("/jenkins.war\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# check for config errors")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("JENKINS_ERRORS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" -f "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${JENKINS_WAR}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v("\n  JENKINS_ERRORS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("JENKINS_ERRORS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("*"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"JENKINS_HOME : The jenkins.war could not be found at '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${JENKINS_HOME}")]),s._v('/jenkins.war"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" -f "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JENKINS_JAVA")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v("\n  JENKINS_ERRORS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("JENKINS_ERRORS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("*"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"JENKINS_JAVA : The java executable could not be found at '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JENKINS_JAVA")]),s._v('"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# display errors if there are any, otherwise start the process")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("JENKINS_ERRORS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("*"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"CONFIGURATION ERROR:"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"    The following errors occurred when starting Jenkins."')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"    Please set the appropriate values at /etc/sysconfig/jenkins"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("((")]),s._v(" i"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("${#JENKINS_ERRORS["),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("]}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")])]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${JENKINS_ERRORS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("${i}")]),s._v(']}"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"starting service"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nohup nice '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JENKINS_JAVA")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JENKINS_JAVAOPTS")]),s._v(" -jar "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JENKINS_WAR")]),s._v(" --httpListenAddress="),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JENKINS_IP")]),s._v(" --httpPort="),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JENKINS_PORT")]),s._v(" $> "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JENKINS_LOG")]),s._v(' 2>&1 &"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("nice")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JENKINS_JAVA")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JENKINS_JAVAOPTS")]),s._v(" -jar "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JENKINS_WAR")]),s._v(" --httpListenAddress"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JENKINS_IP")]),s._v(" --httpPort"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JENKINS_PORT")]),s._v(" $"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JENKINS_LOG")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("&1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br")])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("æç¤º")]),s._v(" "),t("p",[s._v("æ­¤æ—¶è¯¥è„šæœ¬å°±å¯å¯åŠ¨ jenkinsï¼Œé€šè¿‡è¯»å–é…ç½®æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨nohupä»¥å®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼å¯åŠ¨ï¼Œåªæ˜¯ä¸æ˜¯ä¸€ä¸ªç³»ç»ŸæœåŠ¡")])])]),s._v(" "),t("li",[s._v("åœ¨ jenkinså·¥ä½œç›®å½•ç¼–å†™åœæ­¢è„šæœ¬ "),t("code",[s._v("stop-jenkins.sh")]),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("j"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("enkins.war "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{ print "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$2")]),s._v(" }'")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])]),s._v(" "),t("li",[s._v("å®‰è£…ä¸ºæœåŠ¡å¹¶è®¾ç½®ä¸ºå¼€æœºå¯åŠ¨\n"),t("ul",[t("li",[s._v("ç¼–å†™æœåŠ¡è„šæœ¬ï¼Œè·¯å¾„ä¸º "),t("code",[s._v("/etc/init.d/jenkins")])])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#! /bin/bash")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chkconfig: 2345 90 10")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# description: Jenkins Continuous Integration server")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Source function library.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" /etc/rc.d/init.d/functions\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Get network sysconfig.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" /etc/sysconfig/network\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Check that networking is up, otherwise we can't start")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${NETWORKING}")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"no"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Get the Jenkins sysconfig")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" -f /etc/sysconfig/jenkins "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" /etc/sysconfig/jenkins\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("startup")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${JENKINS_HOME}")]),s._v("/start-jenkins.sh\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("shutdown")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${JENKINS_HOME}")]),s._v("/stop-jenkins.sh\n\n"),t("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("start")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" -n $"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Starting Jenkins service: "')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("pid")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("j"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("enkins.war "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -v "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wc")]),s._v(" -l"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pid")]),s._v(" -gt "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Jenkins is already running"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" - "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JENKINS_USER")]),s._v(" -c "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$startup")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("RETVAL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$?")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$RETVAL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Jenkins was started successfully."')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"There was an error starting Jenkins."')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("stop")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  action $"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Stopping Jenkins service: "')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("pid")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("j"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("enkins.war "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -v "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wc")]),s._v(" -l"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pid")]),s._v(" -gt "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Jenkins is not running"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" - "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JENKINS_USER")]),s._v(" -c "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$shutdown")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("RETVAL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$?")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$RETVAL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Jenkins was stopped successfully."')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"There was an error stopping Jenkins."')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("status")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("pid")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("j"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("enkins.war "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -v "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wc")]),s._v(" -l"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pid")]),s._v(" -gt "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Jenkins is running..."')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Jenkins is stopped..."')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("restart")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  stop\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n  start\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Call functions as determined by args.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("\nstart"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  start"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nstop"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  stop"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nstatus"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  status"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nrestart"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  restart"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n*"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" $"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Usage: '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$0")]),s._v(' {start|stop|status|restart}"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("esac")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br"),t("span",{staticClass:"line-number"},[s._v("66")]),t("br"),t("span",{staticClass:"line-number"},[s._v("67")]),t("br"),t("span",{staticClass:"line-number"},[s._v("68")]),t("br"),t("span",{staticClass:"line-number"},[s._v("69")]),t("br"),t("span",{staticClass:"line-number"},[s._v("70")]),t("br"),t("span",{staticClass:"line-number"},[s._v("71")]),t("br"),t("span",{staticClass:"line-number"},[s._v("72")]),t("br"),t("span",{staticClass:"line-number"},[s._v("73")]),t("br"),t("span",{staticClass:"line-number"},[s._v("74")]),t("br"),t("span",{staticClass:"line-number"},[s._v("75")]),t("br"),t("span",{staticClass:"line-number"},[s._v("76")]),t("br"),t("span",{staticClass:"line-number"},[s._v("77")]),t("br"),t("span",{staticClass:"line-number"},[s._v("78")]),t("br")])]),t("ul",[t("li",[s._v("ç»™å¯åŠ¨è„šæœ¬ï¼Œåœæ­¢è„šæœ¬ï¼ŒæœåŠ¡è„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" a+x /home/jenkins/start-jenkins.sh\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" a+x /home/jenkins/stop-jenkins.sh\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" a+x /etc/init.d/jenkins\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])])])]),s._v(" "),t("p",[s._v("åˆ°è¿™é‡Œå³å¯è¿è¡Œ "),t("code",[s._v("service jenkins start")]),s._v("å‘½ä»¤å¯åŠ¨ jenkinsæœåŠ¡äº†")]),s._v(" "),t("h3",{attrs:{id:"systemd-æœåŠ¡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#systemd-æœåŠ¡"}},[s._v("->")]),s._v(" systemd æœåŠ¡")]),s._v(" "),t("p",[s._v("centos 7å·²ç»ä½¿ç”¨ systemdæ¥åšç³»ç»Ÿåˆå§‹åŒ–äº†ï¼Œåœ¨ centos 7ç­‰ç³»ç»Ÿä¸Šå®‰è£…æœåŠ¡ä¸Šé¢çš„æ–¹å¼ä¸é€‚ç”¨ï¼Œä½†å¾ˆå¤šåœ°æ–¹å¯ä»¥å¤ç”¨ã€‚")]),s._v(" "),t("p",[s._v("å‰é¢çš„æ­¥éª¤ç›¸åŒï¼Œè¿˜éœ€é¢å¤–åˆ›å»º systemdçš„æœåŠ¡è„šæœ¬, è„šæœ¬è·¯å¾„ä¸º "),t("code",[s._v("/lib/systemd/system/jenkins.service")])]),s._v(" "),t("div",{staticClass:"language-ini line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ini"}},[t("code",[t("span",{pre:!0,attrs:{class:"token selector"}},[s._v("[Unit]")]),s._v("  \n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("Description")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v("Jenkins Continuous Integration server  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("After")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v("network.target  ")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token selector"}},[s._v("[Service]")]),s._v("  \n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ExecStart")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v("/etc/init.d/jenkins start  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ExecReload")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v("/etc/init.d/jenkins restart  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ExecStop")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v("/etc/init.d/jenkins stop  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("Restart")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v("on-failure")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token selector"}},[s._v("[Install]")]),s._v("  \n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("WantedBy")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v("multi-user.target  ")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("æç¤º")]),s._v(" "),t("p",[s._v("ä¿®æ”¹ serviceæ–‡ä»¶åéœ€è¿è¡Œå‘½ä»¤ "),t("code",[s._v("sudo systemctl daemon-reload")]),s._v("ä½¿ç”Ÿæ•ˆ")])]),s._v(" "),t("p",[s._v("å¦‚æœä½¿è¿™æ ·è¿è¡Œå¯åŠ¨å‘½ä»¤ "),t("code",[s._v("systemctl start jenkins")]),s._v(", å†é€šè¿‡ "),t("code",[s._v("systemctl status jenkins")]),s._v("æŸ¥çœ‹æœåŠ¡ä¼šå‘ç° jenkinsæœåŠ¡å¯åŠ¨æˆåŠŸåç«‹åˆ»åœæ­¢ã€‚")]),s._v(" "),t("p",[s._v("StackOverflow äº†ä»¥ä¸‹ï¼Œä¼¼æ‡‚éæ‡‚ï¼Œå¤§æ¦‚æ˜¯ systemdç®¡ç†è¿›ç¨‹çš„æ–¹å¼å·²ç»å˜äº†ï¼Œå¦‚æœè¿˜æ˜¯ç”¨ä¹‹å‰çš„å®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼å¯åŠ¨ï¼Œsystemdæ— æ³•è·å–å®ƒçš„çŠ¶æ€ä¿¡æ¯ã€‚"),t("br"),s._v("\nå› æ­¤ï¼Œè§£å†³æ–¹æ¡ˆä¹Ÿå¾ˆç®€å•ï¼Œå°†å¯åŠ¨æ–¹å¼æ”¹æˆæ™®é€šçš„è¿›ç¨‹å¯åŠ¨æ–¹å¼å³å¯ï¼Œä¸å†ä½¿ç”¨ nohupå³å¯è§£å†³è¯¥é—®é¢˜ã€‚")]),s._v(" "),t("p",[s._v("å³ï¼Œå°† "),t("code",[s._v("start-jenkins.sh")]),s._v(" è„šæœ¬çš„ç¬¬ 31è¡Œï¼Œä»")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("nice")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JENKINS_JAVA")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JENKINS_JAVAOPTS")]),s._v(" -jar "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JENKINS_WAR")]),s._v(" --httpListenAddress"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JENKINS_IP")]),s._v(" --httpPort"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JENKINS_PORT")]),s._v(" $"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JENKINS_LOG")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("&1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("æ”¹ä¸º")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JENKINS_JAVA")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JENKINS_JAVAOPTS")]),s._v(" -jar "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JENKINS_WAR")]),s._v(" --httpListenAddress"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JENKINS_IP")]),s._v(" --httpPort"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JENKINS_PORT")]),s._v(" $"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JENKINS_LOG")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("&1")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("å³å¯ã€‚"),t("br"),s._v("\nå¹¶ä¸”è¿˜æ”¶è·äº†æ„å¤–é€€å‡ºå¯è‡ªåŠ¨é‡å¯çš„åŠŸèƒ½ï¼Œç¡®å®åŠŸèƒ½æ›´å¼ºå¤§äº†ã€‚")]),s._v(" "),t("h2",{attrs:{id:"docker-å®‰è£…"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-å®‰è£…"}},[s._v("->")]),s._v(" docker å®‰è£…")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/jenkinsci/docker/blob/master/README.md",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/jenkinsci/docker/blob/master/README.md"),t("OutboundLink")],1)]),s._v(" "),t("h2",{attrs:{id:"å‚è€ƒæ–‡æ¡£"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒæ–‡æ¡£"}},[s._v("->")]),s._v(" å‚è€ƒæ–‡æ¡£")]),s._v(" "),t("ul",[t("li"),s._v(" "),t("li",[t("a",{attrs:{href:"https://www.justinsilver.com/technology/linux/install-jenkins-centos-service/",target:"_blank",rel:"noopener noreferrer"}},[s._v("install jenkins as a service on centos6"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://superuser.com/questions/1022142/why-is-systemd-stopping-service-immediately-after-it-is-started",target:"_blank",rel:"noopener noreferrer"}},[s._v("systemd service faq"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=e.exports}}]);