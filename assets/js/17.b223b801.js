(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{732:function(e,n,i){e.exports=i.p+"assets/img/pipeline_job.78de7025.png"},775:function(e,n,i){"use strict";i.r(n);var t=i(51),_=Object(t.a)({},(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("p",[e._v("确认使用 Jenkins v2.0 的流水线任务方案后会面临两个选择，是选择使用 "),t("code",[e._v("流水线")]),e._v("还是 "),t("code",[e._v("多分支流水线")]),e._v(", eg：\n"),t("img",{attrs:{src:i(732),alt:"流水线任务"}})]),e._v(" "),t("h2",{attrs:{id:"流水线任务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#流水线任务"}},[e._v("->")]),e._v(" 流水线任务")]),e._v(" "),t("ul",[t("li",[e._v("流水线任务像是多个自由风格任务的整合")]),e._v(" "),t("li",[e._v("在一个任务里，可以指定多个子任务工作在不同的节点上")]),e._v(" "),t("li",[e._v("不再使用手工配置，而是使用编写 "),t("code",[e._v("Jenkinsfile")]),e._v("的方式作为配置入口和控制中心")]),e._v(" "),t("li",[t("code",[e._v("Jenkinsfile")]),e._v("可以存放在 Jenkins服务器上，也可以放在源码的代码仓库中")])]),e._v(" "),t("h2",{attrs:{id:"多分支流水线任务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#多分支流水线任务"}},[e._v("->")]),e._v(" 多分支流水线任务")]),e._v(" "),t("p",[e._v("多分支流水线相当于是一个或多个流水线任务的集合。会根据设定的规则扫描代码仓库的目标分支，并使用分支名自动创建对应的流水线任务。")]),e._v(" "),t("p",[e._v("普通的流水线任务也支持多分支，但是所有分支运行的是同一个任务，Jenkinsfile是共用的。"),t("br"),e._v("\n多分支是每个分支对应自己的任务，Jenkinsfile可以是每个分支独立一份。")]),e._v(" "),t("p",[e._v("多分支的优势是：")]),e._v(" "),t("ul",[t("li",[e._v("自动的分支发现并创建对应任务")]),e._v(" "),t("li",[e._v("更多的插件支持")]),e._v(" "),t("li",[e._v("某些环境变量只能在多分支流水线中使用, eg: "),t("code",[e._v('"${env.BRANCH_NAME}"')])])]),e._v(" "),t("p",[e._v("也有一些问题：")]),e._v(" "),t("ul",[t("li",[e._v("流水线依旧是“手工配置”和“pipeline script” 的结合体，但多分支流水线去掉了更多的“手工配置”部分，\n替换成了“pipeline script”，并且把示例放在了比较隐蔽的地方： "),t("code",[e._v("<jenkins-url>/pipeline-syntax/")])])]),e._v(" "),t("h2",{attrs:{id:"参考文档"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考文档"}},[e._v("->")]),e._v(" 参考文档")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://jenkins.io/zh/doc/book/pipeline/",target:"_blank",rel:"noopener noreferrer"}},[e._v("jenkins pipeline"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);n.default=_.exports}}]);