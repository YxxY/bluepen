---
title: Jenkins 踩坑总结
date: 2019-10-01
permalink: jenkins/faq
---

总结使用过程中遇到的一些坑

## Gitlab 仓库拉取失败
在任务中填写正确的 gitlab仓库地址及凭据后提示仓库不存在或者鉴权失败

#### 参考
- [The project you were looking for could not be found](https://gitlab.com/gitlab-com/support-forum/issues/638)

#### 解决方案
- 在 http链接中填写项目所有者信息
    ```bash
    #before:
    https://gitlab.com/my_gitlab_user/myrepo.git
    #after:
    https://my_gitlab_user@gitlab.com/my_gitlab_user/myrepo.git
    ```
- 使用 ssh+git地址链接

## 使用 HTTP地址的 Gitlab仓库信息错乱
gitlab仓库地址使用 HTTP链接时，流水线任务构建时会出现找不到正确的分支及提交信息错乱的bug

#### 参考
- [Jenkins will not match repository if pulling from HTTP](https://github.com/jenkinsci/gitlab-plugin/issues/477)
- [the gitlab plugin can not get the correct branch](https://github.com/jenkinsci/gitlab-plugin/issues/444)

#### 解决方案
插件 bug修复前使用 ssh+git地址链接

## 修改子节点环境变量不生效
子节点和 master节点建立连接后再去修改子节点环境变量不生效

#### 参考
- [Changes to slave environment variables are ignored by master](https://issues.jenkins-ci.org/browse/JENKINS-27739?page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel&showAll=true)

#### 解决方案
断开连接，重新建立
